syntax = "proto3";

import "protobuf/definition/instance.proto";

package api;

service Instance {
  rpc List (ListInstancesRequest) returns (ListInstancesResponse) {}
  rpc Create (CreateInstanceRequest) returns (CreateInstanceResponse) {}
  rpc Delete (DeleteInstanceRequest) returns (DeleteInstanceResponse) {}
}

message ListInstancesRequest {
  string serviceHash = 1;   // service hash of instance to filter by service (optional).
}

message ListInstancesResponse {
  repeated definition.Instance instances = 1;
}

message CreateInstanceRequest {
  string serviceHash = 1;      // Service's sid or hash.
  repeated string env = 2;     // Env vars to apply to service's instance on runtime.
}

message CreateInstanceResponse {
  string hash = 1;        // Service's instance hash.
  string serviceHash = 2; // Service's bare hash.
}

message DeleteInstanceRequest {
  string hash = 1;      // Instance hash
}

message DeleteInstanceResponse {
  string hash = 1;      // Instance hash
}
